(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2486a0c7"],{"99af":function(t,a,e){"use strict";var s=e("23e7"),n=e("d039"),o=e("e8b5"),c=e("861d"),i=e("7b0b"),r=e("50c4"),l=e("8418"),d=e("65f0"),u=e("1dde"),p=e("b622"),v=e("2d00"),f=p("isConcatSpreadable"),h=9007199254740991,b="Maximum allowed index exceeded",g=v>=51||!n((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),m=u("concat"),C=function(t){if(!c(t))return!1;var a=t[f];return void 0!==a?!!a:o(t)},_=!g||!m;s({target:"Array",proto:!0,forced:_},{concat:function(t){var a,e,s,n,o,c=i(this),u=d(c,0),p=0;for(a=-1,s=arguments.length;a<s;a++)if(o=-1===a?c:arguments[a],C(o)){if(n=r(o.length),p+n>h)throw TypeError(b);for(e=0;e<n;e++,p++)e in o&&l(u,p,o[e])}else{if(p>=h)throw TypeError(b);l(u,p++,o)}return u.length=p,u}})},e194:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"carList"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-md-8 table-responsive"},[e("table",{staticClass:"table table-hover"},[t._m(1),e("tbody",t._l(t.cartData.carts,(function(a){return e("tr",{key:a.id,staticClass:"text-sbbrown"},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-sbtan border-0",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.removeCartItem(a.id)}}},[e("i",{staticClass:"fas fa-trash-alt"})])]),e("td",{staticClass:"productImg align-middle"},[e("img",{staticClass:"img-thumbnail",attrs:{src:a.product.imageUrl}})]),e("td",{staticClass:"align-middle",on:{click:function(e){return t.$router.push("/shopping/productdetail/"+a.id)}}},[t._v(t._s(a.product.title))]),e("td",{staticClass:"align-middle text-right editColumn"},[t._v(t._s(a.qty)+" ")]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.total)))])])})),0),e("tfoot",[e("tr",{staticClass:"tableTotal"},[e("td",{staticClass:"font-weight-bold text-right",attrs:{colspan:"4"}},[t._v("小計")]),e("td",{staticClass:"h5 font-weight-bold text-right text-danger"},[t._v(t._s(t._f("currency")(t.cartData.total)))])])])])]),e("div",{staticClass:"col-md-4 mb-6"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control ",attrs:{type:"text",placeholder:"請輸入優惠碼:aniyo"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-sbtan",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("確認")])])]),e("div",{staticClass:"d-flex justify-content-between my-2 p-2"},[e("span",[t._v("小計")]),e("span",[t._v(t._s(t._f("currency")(t.cartData.total)))])]),e("div",{staticClass:"d-flex justify-content-between mb-2 p-2"},[e("span",[t._v("優惠折抵")]),e("span",{staticClass:"justify-content-end"},[t._v("- "+t._s(t._f("currency")(t.cartData.total-t.cartData.final_total)))])]),e("p",{staticStyle:{"font-size":"13px",color:"#EA562A"}},[t._v(t._s(t.couponResponse))]),e("div",{staticClass:"d-flex justify-content-between mb-5 p-2"},[e("span",[t._v("總計")]),e("span",[t._v(t._s(t._f("currency")(t.cartData.final_total)))])])])]),e("div",{staticClass:"text-right mt-5 pb-5"},[e("button",{staticClass:"btn btn-secondary mr-2",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.$router.push("shopping/productlist")}}},[t._v("繼續選購")]),e("button",{staticClass:"btn btn-sborange",attrs:{type:"submit"},on:{click:function(a){return a.preventDefault(),t.goNextPage(a)}}},[t._v("下一步")])])]),t._m(2)],1)},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row text-center p-5"},[e("div",{staticClass:"col-md-3 alert alert-sborange alert-rounded"},[t._v(" 確認購物車 "),e("i",{staticClass:"fas fa-angle-double-right"})]),e("div",{staticClass:"col-md-3 alert alert-sbtan alert-rounded"},[t._v("填寫訂單資料")]),e("div",{staticClass:"col-md-3 alert alert-sbtan alert-rounded",attrs:{role:"alert"}},[t._v("確認訂單資料")]),e("div",{staticClass:"col-md-3 alert alert-sbtan alert-rounded"},[t._v("完成訂購")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",{staticClass:"text-sbbrown font-weight-bold"},[e("th",{attrs:{width:"8%"}}),e("th",{staticClass:"productTh",attrs:{width:"18%"}}),e("th",[t._v("商品名稱")]),e("th",{staticClass:"text-center",attrs:{width:"15%"}},[t._v("數量")]),e("th",{staticClass:"text-center",attrs:{width:"15%"}},[t._v("金額")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal fade",attrs:{id:"leaveModal",tabindex:"-1",role:"dialog","aria-hidden":"true","data-backdrop":"static"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-body"},[e("p",[t._v("尚未完成訂購流程，請確認是否離開此頁？")])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary cancel",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-sborange confirm",attrs:{type:"button","data-dismiss":"modal"}},[t._v("確定")])])])])])}],o=(e("99af"),e("4160"),e("159b"),e("1157")),c=e.n(o),i={data:function(){return{cart:{},cartLength:"",coupon_code:"",cartData:{},couponResponse:"",isConfirm:!1,isNext:!1,isLoading:!1}},methods:{getCart:function(){var t=this;t.isLoading=!0;var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("balasa","/cart");t.$http.get(a).then((function(a){t.isLoading=!1,t.myCarts=a.data.data,console.log("getCart",a.data.data)}))},removeCartItem:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("balasa","/cart/").concat(t);a.$http.delete(e).then((function(){a.getCart(),a.$bus.$emit("updateBag")}))},changeQty:function(t,a){var e=parseInt(t.qty+a,10);this.changeNumber(t),console.log("數量",e)},changeNumber:function(t,a){var e=this,s=-1;e.cart.length>0&&e.cart.forEach((function(a,e){a.id===t.id&&(s=e)})),e.cart[s].qty=a>=10?10:a<=1?1:t.qty;var n=parseInt(e.cart[s].price*e.cart[s].qty,10);e.cart[s].total=n,e.getCart()},getCartData:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("balasa","/cart");t.$http.get(a).then((function(a){t.isLoading=!1,t.cartData=a.data.data}))},addCouponCode:function(){var t=this,a={code:t.coupon_code},e="".concat("https://vue-course-api.hexschool.io","/api/").concat("balasa","/coupon");t.$http.post(e,{data:a}).then((function(a){a.data.success?(t.couponResponse=a.data.message,t.getCartData()):t.couponResponse=a.data.message}))},goNextPage:function(){this.isNext=!0,this.$router.push("/shopping/OrderPayment")}},created:function(){var t=this;t.getCart(),t.getCartData(),t.$bus.$on("checkCart:get",(function(){return t.getCart()}))},beforeRouteLeave:function(t,a,e){var s=this;s.isNext?e():(c()("#leaveModal").modal("show"),c()(".confirm").on("click",(function(){s.removeCartItem(),e()})),c()(".cancel").on("click",(function(){e(!1)})))}},r=i,l=e("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2486a0c7.9d171cdc.js.map